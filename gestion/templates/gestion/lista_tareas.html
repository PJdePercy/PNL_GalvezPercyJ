{% extends 'gestion/base.html' %}

{% block title %}Lista de Tareas - CeslySoft{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1><i class="fas fa-clipboard-list me-2" style="color: var(--cesly-primary);"></i>Tablero de Tareas</h1>
      <p class="text-muted mb-0">Gestiona y organiza todas tus tareas de desarrollo</p>
    </div>
    <a href="{% url 'crear_tarea' %}" class="btn btn-primary">
      <i class="fas fa-plus-circle me-2"></i>Nueva Tarea
    </a>
  </div>

  <!-- Estadísticas rápidas -->
  <div class="row mb-4">
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card text-center" style="border-left: 4px solid #6c757d;">
        <div class="card-body">
          <i class="fas fa-hourglass-start fa-2x mb-2" style="color: #6c757d;"></i>
          <h3 class="mb-0" style="color: #6c757d;">{{ pendientes|default:"0" }}</h3>
          <p class="text-muted mb-0">Pendientes</p>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card text-center" style="border-left: 4px solid var(--cesly-primary);">
        <div class="card-body">
          <i class="fas fa-spinner fa-2x mb-2" style="color: var(--cesly-primary);"></i>
          <h3 class="mb-0" style="color: var(--cesly-primary);">{{ en_progreso|default:"0" }}</h3>
          <p class="text-muted mb-0">En Progreso</p>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card text-center" style="border-left: 4px solid #ffc107;">
        <div class="card-body">
          <i class="fas fa-eye fa-2x mb-2" style="color: #ffc107;"></i>
          <h3 class="mb-0" style="color: #ffc107;">{{ en_revision|default:"0" }}</h3>
          <p class="text-muted mb-0">En Revisión</p>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card text-center" style="border-left: 4px solid #28a745;">
        <div class="card-body">
          <i class="fas fa-check-circle fa-2x mb-2" style="color: #28a745;"></i>
          <h3 class="mb-0" style="color: #28a745;">{{ completadas|default:"0" }}</h3>
          <p class="text-muted mb-0">Finalizadas</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de tareas -->
  <div class="card">
    <div class="card-header">
      <i class="fas fa-list me-2"></i>Todas las Tareas
    </div>
    <div class="card-body p-0">
      <div class="list-group list-group-flush">
        {% for tarea in tareas %}
          <a href="{% url 'detalle_tarea' tarea.id %}" class="list-group-item list-group-item-action" style="border-left: 4px solid var(--cesly-primary) !important; border-radius: 0 !important; margin-bottom: 0;">
            <div class="d-flex w-100 justify-content-between align-items-start">
              <div class="flex-grow-1">
                <div class="d-flex align-items-center mb-2">
                  <h5 class="mb-0 me-3">
                    <i class="fas fa-file-alt me-2" style="color: var(--cesly-primary);"></i>
                    {{ tarea.titulo }}
                  </h5>
                  {% if tarea.prioridad == 'Alta' %}
                    <span class="badge bg-danger">
                      <i class="fas fa-exclamation-circle me-1"></i>{{ tarea.prioridad }}
                    </span>
                  {% elif tarea.prioridad == 'Media' %}
                    <span class="badge bg-warning text-dark">
                      <i class="fas fa-exclamation-triangle me-1"></i>{{ tarea.prioridad }}
                    </span>
                  {% else %}
                    <span class="badge bg-success">
                      <i class="fas fa-check me-1"></i>{{ tarea.prioridad }}
                    </span>
                  {% endif %}
                </div>
                <div class="d-flex align-items-center gap-3">
                  <small class="text-muted">
                    <i class="fas fa-info-circle me-1"></i>Estado: 
                    <strong style="color: var(--cesly-secondary);">{{ tarea.estado }}</strong>
                  </small>
                  <small class="text-muted">
                    <i class="fas fa-calendar-alt me-1"></i>{{ tarea.fecha_creacion|date:"d M Y" }}
                  </small>
                </div>
              </div>
              <div class="text-end">
                <i class="fas fa-chevron-right" style="color: var(--cesly-primary);"></i>
              </div>
            </div>
          </a>
        {% empty %}
          <div class="list-group-item text-center py-5">
            <i class="fas fa-inbox fa-3x mb-3" style="color: #dee2e6;"></i>
            <h5 class="text-muted">No hay tareas disponibles</h5>
            <p class="text-muted mb-3">¡Comienza creando tu primera tarea!</p>
            <a href="{% url 'crear_tarea' %}" class="btn btn-primary">
              <i class="fas fa-plus-circle me-2"></i>Crear Tarea
            </a>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}